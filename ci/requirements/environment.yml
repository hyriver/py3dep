name: py3dep-tests
channels:
  - conda-forge
  - nodefaults
dependencies:
  # async_retriever deps
  - aiodns
  - aiosqlite
  - aiohttp >=3.8.1
  - brotli
  - cchardet
  - cytoolz
  - nest-asyncio
  - aiohttp-client-cache >=0.7.3
  - ujson
  - cytoolz

  # pygeoogc deps
  # - async-retriever >=0.3.5
  - cytoolz
  - defusedxml
  - loguru
  - owslib >=0.27.2
  - pyproj >=2.2
  - pyyaml
  - requests
  - requests-cache >=0.9.6
  - shapely >=1.8
  - urllib3

  # pygeoutils deps
  - cytoolz
  - dask-core
  - geopandas >=0.7
  - loguru
  - netcdf4
  - numpy >=1.17
  - pygeos
  - pyproj >=2.2
  - rasterio >=1.2
  - rioxarray >=0.11
  - scipy
  - shapely >=1.8
  - ujson
  - xarray >=2022.03.0
  
  # py3dep
  # - async-retriever >=0.3.6
  - click >=0.7
  - cytoolz
  - numpy >=1.17
  # - pygeoogc >=0.13.7
  # - pygeoutils >=0.13.7
  - rasterio >=1.2
  - rioxarray >=0.11
  - scipy
  - shapely >=1.8
  - xarray >=2022.03.0
  # optional dep
  - richdem>=0.3.4

  # optional deps to speed up xarray
  - bottleneck

  # test deps
  - psutil
  - pytest
  - pytest-cov
  - pytest-xdist

  - pip
  - pip:
    - git+https://github.com/hyriver/async_retriever.git
    - git+https://github.com/hyriver/pygeoogc.git
    - git+https://github.com/hyriver/pygeoutils.git
